<!DOCTYPE html>
<html>
<head>
    <title>PIP Example</title>
    <style>
        body {
            background-color: #451c54;
            color: white;
        }

        h2 {
            text-align: center;
            margin-top: 5%;
        }

        .pip {
            position: absolute;
            top: 25%;
            left: 25%;
            width: 50vw;
            height: 50vh;
            background-color: #e24a66;
            box-shadow: 0px 0px 25px 1px rgba(255, 255, 255, 0.5);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
    </style>
</head>
<body>

<h2>Evexi API Picture In Picture Example</h2>
<div class="pip">Picture in picture will display here</div>
<video width="300" height="200" id="vid1" src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" muted></video>

</body>
<script type="text/javascript">

    var vid = document.getElementById('vid1')

    /**
     * Lifecycle event (This function is triggered by the player to indicate the content is visible on the display.
     * You should use this function to trigger any animations or if your showing a picture in picture feed you
     * should do it here). Any code you put outside this will be ran when the content is loaded and before its displayed.
     */
    function playing() {
        console.log('PLAYING ITEM !!')

        vid.load()
        vid.play()

        window.parent.postMessage(JSON.stringify({
            action: 'pip.show',
            data: {
                source: 'HDMI',
                num: 1,
                x: '25%',
                y: '25%',
                width: '50%',
                height: '50%'
            }
        }), '*')

    }

    /**
     * Lifecycle event (Triggered when the content has stopped showing and before the content is destroyed.
     * You should put any clean up or reset code here.)
     */
    function stopping() {
        console.log('STOPPING ITEM !!')

        vid.pause()
        vid.currentTime = 0
        vid.load()

        window.parent.postMessage(JSON.stringify({
            action: 'pip.hide'
        }), '*')
    }

</script>
</html>
